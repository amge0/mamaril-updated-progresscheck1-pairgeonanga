<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comfort Zone</title>
    <style>
        body {
            text-align: center;
            background-color: #e6e3f1;
        }
        .container {
            width: 500px;
            margin: auto;
            padding: 20px;
            background-color: #d3cfd6;
            border-radius: 10px;
            position: relative;
        }
        h1 {
            font-size: 24px;
            font-weight: bold;
        }
        .room {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 10px auto;
            border: 2px solid black;
            background-image: url('https://i.pinimg.com/736x/af/78/83/af78836ae22a6f7d3843e339c8457335.jpg'); 
            background-size: cover;
            background-position: center;
        }
        .placed-image {
            position: absolute;
            width: 60px;
            height: 60px;
            cursor: grab;
        }
        .side-buttons {
            position: absolute;
            top: 120px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .left-buttons { left: 20px; }
        .right-buttons { right: 20px; }
        .button {
            background-color: #ff9999;
            padding: 10px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-size: 14px;
        }
        .bottom-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        .control {
            background-color: #f8f5a8;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            font-size: 14px;
        }
        /* Pop-up selection panel */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
            display: none;
        }
        .popup img {
            width: 80px;
            height: 80px;
            margin: 10px;
            cursor: pointer;
        }
        .popup button {
            background: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>COMFORT ZONE</h1>
    <div class="container">
        <h2>Customization</h2>
        
        <!-- Left Buttons -->
        <div class="side-buttons left-buttons">
            <button class="button" onclick="openPopup('furnitures')">Furnitures</button>
            <button class="button" onclick="openPopup('lights')">Lights</button>
        </div>

       

        <!-- Right Buttons -->
        <div class="side-buttons right-buttons">
            <button class="button" onclick="openPopup('decoration')">Decoration</button>
            <button class="button">Shape/size</button>
        </div>

        <!-- Bottom Buttons -->
        <div class="bottom-buttons">
            <button class="control">Bookmark</button>
            <button class="control">Description</button>
            <button class="control">Rotate/move</button>
        </div>
        <div class="bottom-buttons">
            <button class="control" onclick="clearImages()">Delete</button>
            <button class="control" onclick="saveLayout()">Save</button>
        </div>
    </div>

    <!-- Pop-up selection panel -->
    <div id="popup" class="popup">
        <h3>Select an Image</h3>
        <div id="popup-content"></div>
        <button onclick="closePopup()">Close</button>
    </div>
  
  <div class="room" id="room">
    <img src="https://i.pinimg.com/736x/af/78/83/af78836ae22a6f7d3843e339c8457335.jpg" width="300" height="300" class="background-image">
</div>

    <script>
        document.addEventListener("DOMContentLoaded", loadSavedImages);

        const imageCategories = {
            furnitures: ["https://i.pinimg.com/736x/41/b8/ed/41b8ed2cb5d3de4b38bc4e2c389a2f2d.jpg", "furniture2.png", "furniture3.png"],
            lights: ["light1.png", "light2.png", "light3.png"],
            decoration: ["deco1.png", "deco2.png", "deco3.png"]
        };

        function openPopup(category) {
            const popup = document.getElementById('popup');
            const popupContent = document.getElementById('popup-content');
            popupContent.innerHTML = '';

            imageCategories[category].forEach(imageSrc => {
                let img = document.createElement('img');
                img.src = imageSrc;
                img.onclick = () => { addImage(imageSrc); closePopup(); };
                popupContent.appendChild(img);
            });

            popup.style.display = 'block';
        }

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }

        function addImage(imageSrc, left = 50, top = 50) {
            let room = document.getElementById('room');
            let img = document.createElement('img');
            img.src = imageSrc;
            img.classList.add('placed-image');
            img.style.left = left + "px";
            img.style.top = top + "px";
            img.draggable = true;

            img.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', '');
                img.style.position = 'absolute';
            });

            img.addEventListener('dragend', (e) => {
                img.style.left = `${e.pageX - room.offsetLeft - 30}px`;
                img.style.top = `${e.pageY - room.offsetTop - 30}px`;
            });

            room.appendChild(img);
        }

        function clearImages() {
            document.getElementById('room').innerHTML = '';
            localStorage.removeItem('savedLayout'); // Clear saved images
        }

        function saveLayout() {
            let images = document.querySelectorAll('.placed-image');
            let savedData = [];

            images.forEach(img => {
                savedData.push({
                    src: img.src,
                    left: img.style.left,
                    top: img.style.top
                });
            });

            localStorage.setItem('savedLayout', JSON.stringify(savedData));
            alert("Layout Saved!");
        }

        function loadSavedImages() {
            let savedLayout = localStorage.getItem('savedLayout');

            if (savedLayout) {
                let images = JSON.parse(savedLayout);
                images.forEach(imgData => {
                    addImage(imgData.src, parseInt(imgData.left), parseInt(imgData.top));
                });
            }
        }
    </script>

</body>
</html>

